<h1>{{script.name}}</h1>

<div class="container">
    <div class="figure">
        <svg width="400" height="300" xmlns="http://www.w3.org/2000/svg">
            <g>
                <title>Background</title>
                <rect fill="none" id="canvas_background" height="220" width="400" y="-1" x="-1" />
                <g display="none" overflow="visible" y="0" x="0" height="100%" width="100%" id="canvasGrid">
                    <rect fill="url(#gridpattern)" stroke-width="0" y="0" x="0" height="100%" width="100%" />
                </g>
            </g>
            <g>
                <title>Snow load</title>
                <rect width="300" height="50"
                      x="50" y="0"
                      stroke-width="3" stroke="#ffffff" fill="none" />
                <text xml:space="preserve"
                      text-anchor="start"
                      font-family="Helvetica, Arial, sans-serif"
                      font-size="24"
                      id="snow-load"
                      [attr.y]="30"
                      x="100"
                      stroke-width="0"
                      stroke="#0f0f00"
                      fill="#ffffff"
                      *ngIf="snowLoad">{{snowLoad.name}} = {{snowLoad.value}}<xhtml:span [innerHtml]="snowLoad.unit | html"></xhtml:span></text>
            </g>
            <g>
                <title>Building</title>
                <line id="left"
                      x1="50" [attr.y1]="200+offset"
                      x2="50" [attr.y2]="addition+offset"
                      stroke-width="3" stroke="#ffffff" fill="none" />
                <line id="top"
                      x1="50" [attr.y1]="addition+offset"
                      x2="350" [attr.y2]="offset"
                      stroke-width="3" stroke="#ffffff" fill="none" />
                <line id="right"
                      x1="350" [attr.y1]="offset"
                      x2="350" [attr.y2]="200+offset"
                      stroke-width="3" stroke="#ffffff" fill="none" />
                <line id="bottom"
                      x1="0" [attr.y1]="200+offset"
                      x2="400" [attr.y2]="200+offset"
                      stroke-width="3" stroke="#ffffff" fill="none" />
                <line id="angle"
                      x1="50" [attr.y1]="addition+offset"
                      x2="225" [attr.y2]="addition+offset"
                      stroke-width="0.5" stroke="#ffffff" fill="none" />
                <line *ngIf="snowFences.value == true"
                      id="snow-fence"
                      x1="55" [attr.y1]="addition+offset"
                      x2="55" [attr.y2]="addition+offset-20"
                      stroke-width="2" stroke="#ffffff" fill="none" />
                <foreignObject class="node"
                               x="209.5"
                               [attr.y]="addition > 30 ? addition-5+offset-22 : offset+30-22"
                               width="100%" height="100%">
                    <xhtml:div>
                        <p>
                            {{slope.name}} = <span>
                                <input class="svg-input"
                                       [required]="isRequired(slope)"
                                       autocomplete="off"
                                       [attr.type]="slope.valueType == 0 ? 'number' : 'text'"
                                       [(ngModel)]="slope.value"
                                       (change)="onSlopeChange()" />
                            </span>{{slope.unit}}
                        </p>
                    </xhtml:div>
                </foreignObject>
            </g>
        </svg>

        <button (click)="calculate()">Calculate</button>
    </div>

    <div class="form ml-2">
        <mat-form-field>
            <input matInput
                   [required]="isRequired(altitude)"
                   autocomplete="off"
                   [attr.type]="altitude.valueType == 0 ? 'number' : 'text'"
                   [(ngModel)]="altitude.value"
                   (change)="onSlopeChange()">
            <mat-placeholder>
                <span [innerHtml]="altitude.name | html"></span>
            </mat-placeholder>
            <span matSuffix [innerHtml]="altitude.unit | html"></span>
        </mat-form-field>
        <p class="parameter-description">{{altitude.description}}</p>

        <mat-form-field>
            <input matInput
                   [required]="isRequired(slope)"
                   autocomplete="off"
                   [attr.type]="slope.valueType == 0 ? 'number' : 'text'"
                   [(ngModel)]="slope.value"
                   (change)="onSlopeChange()">
            <mat-placeholder>
                <span [innerHtml]="slope.name | html"></span>
            </mat-placeholder>
            <span matSuffix [innerHtml]="slope.unit | html"></span>
        </mat-form-field>
        <p class="parameter-description">{{slope.description}}</p>

        <div class="justify-content-start parameter-radio">
            <label class="align-self-start mb-2">
                <span [innerHtml]="topography.name | html"></span>{{isRequired(topography) ? '*' : ''}}
            </label>
            <mat-radio-group [(ngModel)]="topography.value">
                <mat-radio-button *ngFor="let valueOption of topography.valueOptions; index as i"
                                  [value]="valueOption.value"
                                  [required]="isRequired(topography)"
                                  class="mr-3"
                                  (change)="changeValue($event)">
                    {{valueOption.name }}
                </mat-radio-button>
                {{topography.unit | html}}
            </mat-radio-group>
            <p class="parameter-description-radio">{{topography.description}}</p>
        </div>

        <div class="align-self-start parameter-checkbox">
            <label class="align-self-start mb-2">
                {{snowFences.name | html}}{{isRequired(snowFences) ? '*' : ''}}
            </label>

            <div class="d-inline-flex">
                <mat-checkbox [required]="isRequired(snowFences)"
                              class="true"
                              [(ngModel)]="snowFences.value"
                              (change)="calculate()">
                    {{'scriptCalculator.Controls.True' | translate}}
                </mat-checkbox>
            </div>
            <p class="parameter-description-normal">{{snowFences.description}}</p>
        </div>

        <div class="map-container">
            <img src="../../../../../assets/images/custom-views/snow-zones.jpg" />
            <svg height="617" width="617" xmlns="http://www.w3.org/2000/svg"
                 class="zone-container"
                 fill-rule="evenodd">
                <path id="firstZone"
                      d="m48,368c-17,22 -10,17 -10,17c0,0 -11,1 -11,1c0,0 1,-11 1,-11c0,0 17,-30 17,-30c0,0 0,-11
                      0,-11c0,0 -15,-13 -15,-13c0,0 -4,-19 -4,-19c0,0 0,-16 0,-16c0,0 8,-19 8,-19c0,0 0,-20 0,-20c0,0
                      -3,-16 -3,-16c0,0 -7,-12 -7,-12c0,0 22,1 22,1c0,0 30,19 30,19c0,0 28,16 28,16c0,0 18,6 18,6c0,0
                      18,6 18,6c0,0 20,2 20,2c0,0 20,10 20,10c0,0 12,14 12,14c0,0 12,21 13,21c1,0 14,21 14,21c0,0 11,27
                      11,27c0,0 6,27 6,27c0,0 -4,21 -4,21c0,0 -5,21 -5,21c0,0 -8,18 -8,18c0,0 -7,4 -7,4c0,0 -9,0 -9,0c0,0
                      -9,-1 -10,-1c-1,0 -13,-8 -13,-8c0,0 -13,-2 -13,-2c0,0 -8,4 -8,4c0,0 5,10 5,10c0,0 -13,4 -13,4c0,0
                      -4,9 -4,9c0,0 -11,-5 -11,-5c0,0 -8,-24 -8,-24c0,0 -12,-2 -12,-2c0,0 3,-10 3,-10c0,0 10,-10 10,-10c0,0
                      -7,-2 -8,-2c-1,0 -12,2 -13,1c-1,-1 -11,-6 -11,-6c0,0 -13,-7 -13,-7c0,0 -11,-3 -11,-3"
                      class="zone"
                      [class.selected]="zone.value == 'FirstZone'"
                      (click)="selectZone(1)" />
                <path id="secondZone_I"
                      d="m23,219c0,0 -17,-26 -17,-26c0,0 13,-17 13,-17c0,0 7,-21 6,-21c-1,0 -5,-32 -5,-32c0,0 -3,-24
                      -3,-24c0,0 -3,-10 -3,-10c0,0 19,-8 19,-8c0,0 42,-7 42,-7c0,0 28,-11 28,-11c0,0 27,-9 27,-9c0,0
                      24,-25 24,-25c0,0 -5,41 -5,41c0,0 8,45 8,45c0,0 22,30 22,30c0,0 33,16 33,16c0,0 29,1 29,1c0,0
                      45,-7 45,-7c0,0 33,1 33,1c0,0 30,17 30,17c0,0 111,45 111,45c0,0 5,24 5,24c0,0 -3,8 -3,8c0,0 7,15
                      7,15c0,0 18,45 18,45c0,0 -9,24 -9,24c0,0 -51,33 -51,33c0,0 -57,22 -57,22c0,0 -41,16 -41,16c0,0 -9,13
                      -9,13c0,0 4,26 4,26c0,0 -2,17 -2,17c0,0 -8,15 -8,15c0,0 -24,18 -24,18c0,0 -23,13 -23,13c0,0 -5,-12
                      -5,-12c0,0 -22,-14 -22,-14c0,0 -19,1 -19,1c0,0 -11,-15 -11,-15c0,0 8,-12 8,-12c0,0 -3,-7 -3,-7c0,0
                      21,-49 21,-49c0,0 -3,-28 -3,-28c0,0 -12,-33 -12,-33c0,0 -17,-28 -17,-28c0,0 -16,-27 -16,-27c0,0
                      -28,-12 -28,-12c0,0 -34,-10 -34,-10c0,0 -16,-5 -16,-5c0,0 -14,-4 -14,-4c0,0 -28,-18 -28,-18c0,0
                      -21,-16 -21,-16c0,0 -13,-1 -13,-1"
                      class="zone"
                      [class.selected]="zone.value == 'SecondZone'"
                      (click)="selectZone(2)" />
                <path id="thirdZone"
                      d="M 154.26892,31.42254c0,0 30.00006,-7.69232 29.5776,-8.34557c0.42246,0.65325 28.88406,-12.4237
                      28.4616,-13.07695c0.42246,0.65325 41.961,-3.96214 41.53854,-4.61539c0.42246,0.65325 31.19175,19.11482
                      30.76929,18.46157c0.42246,0.65325 3.49939,6.03788 3.49939,6.03788c0,0 -6.92309,1.53846
                      -7.34555,0.88521c0.42246,0.65325 -21.88527,-14.73139 -22.30774,-15.38464c0.42247,0.65325 6.57632,22.19175
                      6.15386,21.5385c0.42246,0.65325 18.11481,12.96097 18.11481,12.96097c0,0 18.46157,2.3077
                      18.03911,1.65444c0.42246,0.65326 30.42252,-9.34676 30.00006,-10.00002c0.42246,0.65326 35.80715,-0.11598
                      35.38469,-0.76923c0.42246,0.65325 2.73016,9.11481 2.73016,9.11481c0,0 -10.00002,33.84622
                      -10.42249,33.19297c0.42247,0.65325 1.96093,23.73022 1.96093,23.73022c0,0 14.61542,26.92313
                      14.19295,26.26988c0.42247,0.65325 17.34558,13.7302 16.92311,13.07695c0.42247,0.65325 31.96099,3.73018
                      31.96099,3.73018c0,0 37.69239,0 37.69239,0c0,0 40.76931,6.92309 40.76931,6.92309c0,0 22.30774,11.53849
                      21.88527,10.88523c0.42247,0.65326 19.65328,37.57641 19.2308,36.92315c0.42248,0.65326 9.65326,33.73025
                      9.23079,33.07699c0.42247,0.65326 3.4994,16.03791 3.4994,16.03791c0,0 18.46158,13.84618 18.46158,13.84618c0,0
                      0,13.84618 0,14.61541c0,0.76923 2.3077,12.30772 1.88522,11.65446c0.42248,0.65326 -4.96215,6.80712
                      -5.38462,6.15386c0.42247,0.65326 8.11479,26.03792 7.69232,25.38466c0.42247,0.65326 3.4994,16.03791
                      3.07693,15.38465c0.42247,0.65326 30.42253,39.88411 30.00006,39.23085c0.42247,0.65326 -4.96215,8.34558
                      -4.96215,8.34558c0,0 6.15385,21.53851 6.15385,21.53851c0,0 -3.07692,12.30771 -3.07692,12.30771c0,0
                      -15.38465,8.46156 -15.80712,7.8083c0.42247,0.65326 -58.80842,79.11496 -58.80842,79.11496c0,0 -1.53846,10.00002
                      -1.96094,9.34675c0.42248,0.65327 -7.26985,6.03789 -7.69232,5.38463c0.42247,0.65326 -1.11599,18.34561
                      -0.34676,19.11484c0.76923,0.76923 13.07695,22.30774 13.84618,22.30774c0.76923,0 -2.3077,10.76925
                      -2.73017,10.11598c0.42247,0.65327 -21.88526,-16.26984 -21.88526,-16.26984c0,0 -14.61542,0.76923
                      -15.03789,0.11596c0.42247,0.65327 -33.42375,-22.4237 -33.84622,-23.07697c0.42247,0.65327 -29.57759,-1.65443
                      -30.00006,-2.30769c0.42247,0.65326 -11.11602,9.11482 -11.11602,9.11482c0,0 -33.84622,-6.92309
                      -34.26868,-7.57636c0.42246,0.65327 -12.65449,-3.19289 -13.07695,-3.84616c0.42246,0.65327 -21.88527,2.96096
                      -22.30774,2.3077c0.42247,0.65326 -13.42372,5.26866 -13.42372,5.26866c0,0 -7.69232,-9.23079
                      -8.11478,-9.88406c0.42246,0.65327 -1.88524,-11.65445 -2.3077,-12.30771c0.42246,0.65326 -12.65449,5.26866
                      -12.65449,5.26866c0,0 -8.46155,13.84618 -8.46155,13.84618c0,0 -5.38463,0 -6.15386,0c-0.76923,0 -6.15386,5.38462
                      -6.57632,4.73136c0.42246,0.65326 -10.34679,1.4225 -10.76925,0.76923c0.42246,0.65327 -2.65447,-7.80829
                      -3.07693,-8.46156c0.42246,0.65327 -5.7314,-5.50059 -5.7314,-5.50059c0,0 -5.38463,-10.00002 -5.38463,-10.00002c0,0
                      -6.92309,-6.92309 -7.34555,-7.57635c0.42246,0.65326 54.26873,-36.26989 54.26873,-36.26989c0,0 4.61539,-25.38467
                      4.61539,-25.38467c0,0 -2.3077,-30.00006 -2.73016,-30.65332c0.42246,0.65326 7.34555,-12.42369
                      6.92309,-13.07695c0.42246,0.65326 105.80729,-40.11605 105.80729,-40.11605c0,0 44.61548,-30.00006
                      44.61548,-30.00006c0,0 8.46155,-22.30774 8.46155,-22.30774c0,0 -23.07697,-66.15398 -23.07697,-66.15398c0,0
                      1.53847,-6.92309 1.53847,-6.92309c0,0 -5.38463,-23.07697 -5.38463,-23.07697c0,0 -111.53869,-43.07701
                      -111.53869,-43.07701c0,0 -26.15389,-16.15388 -26.15389,-16.15388c0,0 -20.76928,-2.30769 -20.76928,-2.30769c0,0
                      -18.46157,-0.76924 -18.88404,-1.42249c0.42247,0.65325 -37.26992,8.34558 -37.26992,8.34558c0,0 -29.23083,-0.76924
                      -29.23083,-0.76924c0,0 -37.69238,-16.92311 -38.11484,-17.57636c0.42246,0.65325 -19.57758,-27.80834
                      -19.57758,-27.80834c0,0 -8.46156,-49.23087 -8.46156,-49.23087c0,0 4.6154,-34.61546 4.6154,-34.61546z
                      M 375.0386,459.88495c0,0 0,12.30772 -0.42247,11.65445c0.42247,0.65327 29.65329,15.26868
                      29.23083,14.61541c0.42246,0.65327 30.42253,2.19173 30.42253,2.19173c0,0 33.84622,-6.15385
                      33.84622,-6.15385c0,0 29.23083,-12.30772 28.80836,-12.96099c0.42247,0.65327 5.03786,-7.03905
                      4.61539,-7.69232c0.42247,0.65327 5.8071,-16.26985 5.38463,-16.92311c0.42247,0.65326 -2.65446,-10.88522
                      -2.65446,-10.88522c0,0 -13.84619,-6.15386 -14.26865,-6.80712c0.42246,0.65326 -16.50065,-0.8852
                      -16.92311,-1.53847c0.42246,0.65327 -38.80838,8.34559 -39.23085,7.69233c0.42247,0.65326 -33.42376,12.96098
                      -33.84622,12.30771c0.42246,0.65327 -9.57756,4.49943 -9.57756,4.49943"
                      class="zone"
                      [class.selected]="zone.value == 'ThirdZone'"
                      (click)="selectZone(3)" />
                <path id="secondZone_II"
                      d="m375.0386,459.88495c0,0 0,12.30772 -0.42247,11.65445c0.42247,0.65327 29.65329,15.26868
                      29.23083,14.61541c0.42246,0.65327 30.42253,2.19173 30.42253,2.19173c0,0 33.84622,-6.15385
                      33.84622,-6.15385c0,0 29.23083,-12.30772 28.80836,-12.96099c0.42247,0.65327 5.03786,-7.03905
                      4.61539,-7.69232c0.42247,0.65327 5.8071,-16.26985 5.38463,-16.92311c0.42247,0.65326 -2.65446,-10.88522
                      -2.65446,-10.88522c0,0 -13.84619,-6.15386 -14.26865,-6.80712c0.42246,0.65326 -16.50065,-0.8852
                      -16.92311,-1.53847c0.42246,0.65327 -38.80838,8.34559 -39.23085,7.69233c0.42247,0.65326 -33.42376,12.96098
                      -33.84622,12.30771c0.42246,0.65327 -9.57756,4.49943 -9.57756,4.49943"
                      class="zone"
                      [class.selected]="zone.value == 'SecondZone'"
                      (click)="selectZone(2)" />
                <path id="fourthZone"
                      d="m555.80819,236.80757c0,0 10.76925,-10.76925 10.76925,-10.76925c0,0 11.53848,0.76923
                      11.11601,0.11597c0.42247,0.65326 12.73019,-7.03907 12.73019,-7.03907c0,0 -0.76923,-26.1539
                      -1.1917,-26.80716c0.42247,0.65326 -4.19292,-5.5006 -4.61539,-6.15386c0.42247,0.65326 1.96094,-20.88525
                      1.96094,-20.88525c0,0 -10.00002,-21.53851 -10.42249,-22.19176c0.42247,0.65326 -13.42371,-21.65448
                      -13.84618,-22.30774c0.42247,0.65325 -7.26985,-24.73141 -7.26985,-24.73141c0,0 -0.76923,-23.8462
                      -0.76923,-23.8462c0,0 -3.84616,-16.92311 -3.84616,-16.92311c0,0 -20.00004,-9.23079 -20.00004,-10.00002c0,-0.76923
                      -23.07697,0 -23.07697,0c0,0 -56.92319,5.38463 -56.92319,5.38463c0,0 -80.76939,-6.15386 -80.76939,-6.15386c0,0
                      -7.69232,35.38469 -7.69232,35.38469c0,0 0,23.8462 -0.42247,23.19295c0.42247,0.65325 10.42249,22.96099
                      10.00002,22.30774c0.42247,0.65325 18.88404,18.3456 18.46158,17.69234c0.42247,0.65326 34.26869,5.26865
                      34.26869,5.26865c0,0 35.38469,0 35.38469,0c0,0 41.53855,8.46156 41.11608,7.8083c0.42247,0.65326 22.73021,9.88404
                      22.30774,9.23079c0.42247,0.65326 20.42251,35.26871 20.00004,34.61545c0.42247,0.65326 8.11479,30.65332
                      7.69232,30.00006c0.42247,0.65326 5.03786,6.80712 5.03786,6.80712z"
                      class="zone"
                      [class.selected]="zone.value == 'FourthZone'"
                      (click)="selectZone(4)" />
                <path id="fifthZone"
                      d="m345.35709,539.42758c0,0 6.2857,7.99999 6.07083,7.99998c0.21488,0.00001 -0.92798,7.42857
                      -1.14286,7.42856c0.21488,0.00001 14.50057,2.28572 14.28569,2.28571c0.21488,0.00001 4.7863,5.71429
                      4.57142,5.71428c0.21488,0.00001 3.64344,-11.99997 3.42857,-11.99998c0.21488,0.00001 15.07199,-13.14282
                      14.85712,-13.14283c0.21488,0.00001 -9.49939,-4.57141 -9.49939,-4.57141c0,0 -22.28567,1.71428 -22.28567,1.71428"
                      class="zone"
                      [class.selected]="zone.value == 'FifthZone'"
                      (click)="selectZone(5)" />
            </svg>
        </div>
    </div>
</div>